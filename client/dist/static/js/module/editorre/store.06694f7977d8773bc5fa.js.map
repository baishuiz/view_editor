{"version":3,"sources":["webpack:///static/js/module/editorre/store.06694f7977d8773bc5fa.js","webpack:///./src/module/editorre/store/store.js?f134"],"names":["webpackJsonp","755","module","exports","__webpack_require__","94","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vuex__","Token","token","BASE16","use","_getParentCom","coms","key","length","com","stack","forEach","i","push","tmp","shift","children","content","some","$$key","concat","_getCom","state","base","id","t_type","title","desc","img_cover","platform_type","page_type","update_time","json","currentComKey","clientWidth","getters","getBaseData","getComType","getPageData","getCurrentComKey","getCurrentCom","pageData","currKey","mutations","ADD_ROOT","obj","index","set","ADD_COM","cc","chc","UPDATE_COM","currentCom","data","CHANGE_COM_KEY","SET_BASE","SET_PAGE","DEL_COM","parent","delete","SORT_COM","splice","dragIndex","dropIndex","dragEle","SET_CLIENT_WIDTH","actions","addContainer","_ref","commit","Promise","resolve","reject","unique","generate","page","addCom","_ref2","container","parentCom","$$level","curCon","updateCom","_ref3","changeComKey","_ref4","setBase","_ref5","setPageContent","_ref6","deleteCom","_ref7","cons","parentObj","sort","_ref8","setClientWidth","_ref9","Store"],"mappings":"AAAAA,cAAc,IAERC,IACA,SAAUC,EAAQC,EAASC,GAEjCA,EAAoB,IACpBF,EAAOC,QAAUC,EAAoB,KAK/BC,GACA,SAAUH,EAAQI,EAAqBF,GAE7C,YACAG,QAAOC,eAAeF,EAAqB,cAAgBG,OAAO,GAC7C,IAAIC,GAAoCN,EAAoB,IACxDO,EAAqCP,EAAoB,KCf5EQ,EAAQR,EAAQ,KAClBS,EAAQ,GAAID,GAAMA,EAAME,OAE5BJ,GAAA,QAAIK,IAAIJ,EAAA,EAER,IAAMK,GAAgB,SAACC,EAAMC,GAC5B,IAAID,GAAQA,EAAKE,OAAS,EACzB,OAAO,CAGR,IAWIC,GADAC,IAEJJ,GAAKK,QAAQ,SAACF,EAAKG,GAClBF,EAAMG,KAAKJ,IAGZ,KADA,GAAIK,GACEJ,EAAMF,QAAO,CAClBM,EAAMJ,EAAMK,OACX,IAAIC,GAAWF,EAAIG,OACpB,IAAGD,GAAYA,EAASR,OAAS,GAnBjB,SAACQ,EAAUT,GAO3B,MANUS,GAASE,KAAK,SAACT,GACxB,MAAGA,GAAIU,QAAUZ,KAiB+BS,EAAUT,GAAK,CAC/DE,EAAMK,CACN,OAEQE,GAAYA,EAASR,OAAS,IAC7BE,EAAQA,EAAMU,OAAOJ,IAGhC,MAAOP,IAEFY,EAAU,SAACf,EAAMC,GACtB,IAAID,GAAQA,EAAKE,OAAS,EACzB,OAAO,CAER,IACIC,GADAC,IAEJJ,GAAKK,QAAQ,SAACF,EAAKG,GAClBF,EAAMG,KAAKJ,IAGZ,KADA,GAAIK,GACEJ,EAAMF,QAAO,CAElB,GADAM,EAAMJ,EAAMK,QACTD,EAAIK,QAAUZ,EAAI,CACpBE,EAAMK,CACN,OAEA,GAAIE,GAAWF,EAAIG,OACXD,IAAYA,EAASR,OAAS,IAC7BE,EAAQA,EAAMU,OAAOJ,IAGhC,MAAOP,IAEFa,GACLC,MACCC,GAAI,GACJC,OAAQ,GACRC,MAAO,GACPC,KAAM,GACNC,UAAW,GACXC,cAAe,EACfC,UAAW,EACXC,YAAa,IAEdC,QACAC,cAAe,GACfC,YAAa,KAERC,GACLC,YADe,SACFd,GACZ,MAAOA,GAAMC,MAEdc,WAJe,SAIHf,GACX,MAAOA,GAAMC,KAAKE,QAEnBa,YAPe,SAOFhB,GACZ,MAAOA,GAAMU,MAEdO,iBAVe,SAUGjB,GACjB,MAAOA,GAAMW,eAEdO,cAbe,SAaAlB,EAAOa,GACrB,GAAIM,GAAWN,EAAQG,YACnBI,EAAUP,EAAQI,gBAGtB,OADUlB,GAAQoB,EAAUC,IAG7BR,YApBe,SAoBFZ,GACZ,MAAOA,GAAMY,cAGTS,GACLC,SADgB,SACNtB,EAAOuB,GAChB,GAAIC,GAAQxB,EAAMU,KAAKxB,MACvBT,GAAA,QAAIgD,IAAIzB,EAAMU,KAAMc,EAAOD,GAC3BvB,EAAMW,cAAgBY,EAAI1B,OAE3B6B,QANgB,SAMP1B,EAAOuB,GACf9C,EAAA,QAAIgD,IAAIF,EAAII,GAAGhC,QAAS4B,EAAII,GAAGhC,QAAQT,OAAQqC,EAAIK,KACnD5B,EAAMW,cAAgBY,EAAIK,IAAI/B,OAE/BgC,WAVgB,SAUJ7B,EAAOuB,GAClBA,EAAIO,WAAaP,EAAIQ,MAEtBC,eAbgB,SAaDhC,EAAOf,GACrBe,EAAMW,cAAgB1B,GAEvBgD,SAhBgB,SAgBNjC,EAAOuB,GAChBvB,EAAMC,KAAKC,GAAKqB,EAAIrB,GACpBF,EAAMC,KAAKG,MAAQmB,EAAInB,MACvBJ,EAAMC,KAAKI,KAAOkB,EAAIlB,KACtBL,EAAMC,KAAKK,UAAYiB,EAAIjB,UAC3BN,EAAMC,KAAKE,OAASoB,EAAIpB,OACxBH,EAAMC,KAAKM,cAAgBgB,EAAIhB,cAC/BP,EAAMC,KAAKO,UAAYe,EAAIf,WAE5B0B,SAzBgB,SAyBNlC,EAAOuB,GACbA,GAAOA,EAAIrC,OAAO,IACpBc,EAAMU,KAAOa,IAGfY,QA9BgB,SA8BPnC,EAAOuB,GACf,GAAIC,SACJD,GAAIa,OAAOxC,KAAK,SAACT,EAAKG,GACrB,MAAGH,GAAIU,QAAU0B,EAAItC,IAAIY,QACxB2B,EAAQlC,GACD,KAITb,EAAA,QAAI4D,OAAOd,EAAIa,OAAQZ,GACvBxB,EAAMW,cAAgB,IAEvB2B,SA1CgB,SA0CNtC,EAAOuB,GAChBA,EAAIa,OAAOG,OAAOhB,EAAIiB,UAAW,GACjCjB,EAAIa,OAAOG,OAAOhB,EAAIkB,UAAW,EAAGlB,EAAImB,UAEzCC,iBA9CgB,SA8CE3C,EAAOuB,GACxBvB,EAAMY,YAAcW,IAGhBqB,GACLC,aADe,SAAAC,EACSvB,GAAK,GAAdwB,GAAcD,EAAdC,MACd,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC5B,GAAIC,GAAS,MAAOvE,EAAMwE,UAC1B7B,GAAI8B,KAAKxD,MAAQsD,EACjB5B,EAAI8B,KAAKnD,GAAKiD,EACdJ,EAAO,WAAYxB,EAAI8B,MACvBJ,EAAQ1B,EAAI8B,SAGdC,OAVe,SAAAC,EAUYhC,GAAK,GAAvBwB,GAAuBQ,EAAvBR,OAAQlC,EAAe0C,EAAf1C,OAChB,OAAO,IAAImC,SAAQ,SAACC,EAASC,GAC5B,GAAIM,GAAYjC,EAAIiC,WAAa3C,EAAQG,YAAYH,EAAQG,YAAY9B,OAAS,GAC9E4C,EAAajB,EAAQK,cAAcL,EAAQK,cAAcsC,EACzDC,QACJ,IAAyB,IAAtB3B,EAAW4B,SAAgBnC,EAAIpC,IAAIuE,UAAY5B,EAAW4B,QAC5DD,EAAY3B,MAGZ,KADA2B,EAAY1E,EAAc8B,EAAQG,YAAaH,EAAQI,kBACjDwC,EAAUC,UAAYnC,EAAIpC,IAAIuE,SACnCD,EAAa1E,EAAc8B,EAAQG,YAAayC,EAAU5D,MAG5D,IAAIsD,GAAS,MAAOvE,EAAMwE,UAC1B7B,GAAIpC,IAAIU,MAAQsD,EAChB5B,EAAIpC,IAAIe,GAAKiD,EACbJ,EAAO,WAAYpB,GAAG8B,EAAW7B,IAAIL,EAAIpC,MACzC8D,GAAS9D,IAAKoC,EAAIpC,IAAKwE,OAAQF,OAGjCG,UA9Be,SAAAC,EA8BMtC,GAAK,GAAdwB,GAAcc,EAAdd,MACX,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC5BH,EAAO,aAAcxB,GACrB0B,EAAQ1B,EAAIO,eAGdgC,aApCe,SAAAC,EAoCSxC,GAAK,GAAdwB,GAAcgB,EAAdhB,MACd,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC5BH,EAAO,iBAAkBxB,GACzB0B,EAAQ1B,MAGVyC,QA1Ce,SAAAC,EA0CI1C,IAClBwB,EADuBkB,EAAdlB,QACF,WAAYxB,IAEpB2C,eA7Ce,SAAAC,EA6CW5C,GAAK,GAAdwB,GAAcoB,EAAdpB,MAChB,OAAO,IAAIC,SAAQ,SAACC,EAASC,GAC5BH,EAAO,WAAYxB,EAAItB,MACvB8C,EAAO,WAAYxB,EAAI8B,MAEvBJ,EAAQ1B,MAGV6C,UArDe,SAAAC,EAqDe9C,GAAK,GAAvBwB,GAAuBsB,EAAvBtB,OAAQlC,EAAewD,EAAfxD,OACnB,OAAO,IAAImC,SAAQ,SAACC,EAASC,GAC5B,GAAIpB,GAAajB,EAAQK,aACtBK,IAAOA,EAAI+C,OACbxC,EAAaP,EAAI+C,KAElB,IAAIC,SAEHA,GADyB,IAAvBzC,EAAW4B,QACD7C,EAAQG,YAERjC,EAAc8B,EAAQG,YAAaH,EAAQI,kBAAkBtB,QAE1EoD,EAAO,WAAYX,OAAQmC,EAAWtF,IAAK6C,IAC3CmB,EAAQnB,MAGV0C,KArEe,SAAAC,EAqEUlD,GAAK,GAAvBwB,GAAuB0B,EAAvB1B,OAAQlC,EAAe4D,EAAf5D,OACd,OAAO,IAAImC,SAAQ,SAACC,EAASC,GAC5B,GAAI/D,GAAMoC,EAAImB,QACV6B,QAEHA,GADkB,IAAhBpF,EAAIuE,QACM7C,EAAQG,YAERjC,EAAc8B,EAAQG,YAAa7B,EAAIU,OAAOF,QAE3D4B,EAAIa,OAASmC,EACbxB,EAAO,WAAYxB,GACnB0B,GAAQ,MAGVyB,eAnFe,SAAAC,EAmFWpD,IACzBwB,EAD8B4B,EAAd5B,QACT,mBAAoBxB,IAG7BlD,GAAA,WAAmBK,GAAA,EAAKkG,OACvB5E,QACAqB,YACAuB,UACA/B,eD4CE","file":"static/js/module/editorre/store.06694f7977d8773bc5fa.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ 755:\n/***/ (function(module, exports, __webpack_require__) {\n\n__webpack_require__(28);\nmodule.exports = __webpack_require__(94);\n\n\n/***/ }),\n\n/***/ 94:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(362);\n\n\nvar Token = __webpack_require__(354);\nvar token = new Token(Token.BASE16);\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].use(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* default */]);\n\nvar _getParentCom = function _getParentCom(coms, key) {\n\tif (!coms || coms.length < 1) {\n\t\treturn false;\n\t}\n\n\tvar _isContain = function _isContain(children, key) {\n\t\tvar eqr = children.some(function (com) {\n\t\t\tif (com.$$key === key) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\treturn eqr;\n\t};\n\n\tvar stack = [];\n\tvar com;\n\tcoms.forEach(function (com, i) {\n\t\tstack.push(com);\n\t});\n\tvar tmp;\n\twhile (stack.length) {\n\t\ttmp = stack.shift();\n\t\tvar children = tmp.content;\n\t\tif (children && children.length > 0 && _isContain(children, key)) {\n\t\t\tcom = tmp;\n\t\t\tbreak;\n\t\t}\n\t\tif (children && children.length > 0) {\n\t\t\tstack = stack.concat(children);\n\t\t}\n\t}\n\treturn com;\n};\nvar _getCom = function _getCom(coms, key) {\n\tif (!coms || coms.length < 1) {\n\t\treturn false;\n\t}\n\tvar stack = [];\n\tvar com;\n\tcoms.forEach(function (com, i) {\n\t\tstack.push(com);\n\t});\n\tvar tmp;\n\twhile (stack.length) {\n\t\ttmp = stack.shift();\n\t\tif (tmp.$$key === key) {\n\t\t\tcom = tmp;\n\t\t\tbreak;\n\t\t}\n\t\tvar children = tmp.content;\n\t\tif (children && children.length > 0) {\n\t\t\tstack = stack.concat(children);\n\t\t}\n\t}\n\treturn com;\n};\nvar state = {\n\tbase: {\n\t\tid: '',\n\t\tt_type: '',\n\t\ttitle: '',\n\t\tdesc: '',\n\t\timg_cover: '',\n\t\tplatform_type: 0,\n\t\tpage_type: 0,\n\t\tupdate_time: ''\n\t},\n\tjson: [],\n\tcurrentComKey: '',\n\tclientWidth: 375\n};\nvar getters = {\n\tgetBaseData: function getBaseData(state) {\n\t\treturn state.base;\n\t},\n\tgetComType: function getComType(state) {\n\t\treturn state.base.t_type;\n\t},\n\tgetPageData: function getPageData(state) {\n\t\treturn state.json;\n\t},\n\tgetCurrentComKey: function getCurrentComKey(state) {\n\t\treturn state.currentComKey;\n\t},\n\tgetCurrentCom: function getCurrentCom(state, getters) {\n\t\tvar pageData = getters.getPageData;\n\t\tvar currKey = getters.getCurrentComKey;\n\t\tvar currCom = void 0;\n\t\tcurrCom = _getCom(pageData, currKey);\n\t\treturn currCom;\n\t},\n\tclientWidth: function clientWidth(state) {\n\t\treturn state.clientWidth;\n\t}\n};\nvar mutations = {\n\tADD_ROOT: function ADD_ROOT(state, obj) {\n\t\tvar index = state.json.length;\n\t\t__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].set(state.json, index, obj);\n\t\tstate.currentComKey = obj.$$key;\n\t},\n\tADD_COM: function ADD_COM(state, obj) {\n\t\t__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].set(obj.cc.content, obj.cc.content.length, obj.chc);\n\t\tstate.currentComKey = obj.chc.$$key;\n\t},\n\tUPDATE_COM: function UPDATE_COM(state, obj) {\n\t\tobj.currentCom = obj.data;\n\t},\n\tCHANGE_COM_KEY: function CHANGE_COM_KEY(state, key) {\n\t\tstate.currentComKey = key;\n\t},\n\tSET_BASE: function SET_BASE(state, obj) {\n\t\tstate.base.id = obj.id;\n\t\tstate.base.title = obj.title;\n\t\tstate.base.desc = obj.desc;\n\t\tstate.base.img_cover = obj.img_cover;\n\t\tstate.base.t_type = obj.t_type;\n\t\tstate.base.platform_type = obj.platform_type;\n\t\tstate.base.page_type = obj.page_type;\n\t},\n\tSET_PAGE: function SET_PAGE(state, obj) {\n\t\tif (obj && obj.length > 0) {\n\t\t\tstate.json = obj;\n\t\t}\n\t},\n\tDEL_COM: function DEL_COM(state, obj) {\n\t\tvar index = void 0;\n\t\tobj.parent.some(function (com, i) {\n\t\t\tif (com.$$key === obj.key.$$key) {\n\t\t\t\tindex = i;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\t__WEBPACK_IMPORTED_MODULE_0_vue__[\"default\"].delete(obj.parent, index);\n\t\tstate.currentComKey = '';\n\t},\n\tSORT_COM: function SORT_COM(state, obj) {\n\t\tobj.parent.splice(obj.dragIndex, 1);\n\t\tobj.parent.splice(obj.dropIndex, 0, obj.dragEle);\n\t},\n\tSET_CLIENT_WIDTH: function SET_CLIENT_WIDTH(state, obj) {\n\t\tstate.clientWidth = obj;\n\t}\n};\nvar actions = {\n\taddContainer: function addContainer(_ref, obj) {\n\t\tvar commit = _ref.commit;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar unique = 'cp-' + token.generate();\n\t\t\tobj.page.$$key = unique;\n\t\t\tobj.page.id = unique;\n\t\t\tcommit('ADD_ROOT', obj.page);\n\t\t\tresolve(obj.page);\n\t\t});\n\t},\n\taddCom: function addCom(_ref2, obj) {\n\t\tvar commit = _ref2.commit,\n\t\t    getters = _ref2.getters;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar container = obj.container || getters.getPageData[getters.getPageData.length - 1];\n\t\t\tvar currentCom = getters.getCurrentCom ? getters.getCurrentCom : container;\n\t\t\tvar parentCom = void 0;\n\t\t\tif (currentCom.$$level !== 0 && obj.com.$$level !== currentCom.$$level) {\n\t\t\t\tparentCom = currentCom;\n\t\t\t} else {\n\t\t\t\tparentCom = _getParentCom(getters.getPageData, getters.getCurrentComKey);\n\t\t\t\twhile (parentCom.$$level === obj.com.$$level) {\n\t\t\t\t\tparentCom = _getParentCom(getters.getPageData, parentCom.$$key);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar unique = 'cp-' + token.generate();\n\t\t\tobj.com.$$key = unique;\n\t\t\tobj.com.id = unique;\n\t\t\tcommit('ADD_COM', { cc: parentCom, chc: obj.com });\n\t\t\tresolve({ com: obj.com, curCon: parentCom });\n\t\t});\n\t},\n\tupdateCom: function updateCom(_ref3, obj) {\n\t\tvar commit = _ref3.commit;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tcommit('UPDATE_COM', obj);\n\t\t\tresolve(obj.currentCom);\n\t\t});\n\t},\n\tchangeComKey: function changeComKey(_ref4, obj) {\n\t\tvar commit = _ref4.commit;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tcommit('CHANGE_COM_KEY', obj);\n\t\t\tresolve(obj);\n\t\t});\n\t},\n\tsetBase: function setBase(_ref5, obj) {\n\t\tvar commit = _ref5.commit;\n\n\t\tcommit('SET_BASE', obj);\n\t},\n\tsetPageContent: function setPageContent(_ref6, obj) {\n\t\tvar commit = _ref6.commit;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tcommit('SET_BASE', obj.base);\n\t\t\tcommit('SET_PAGE', obj.page);\n\n\t\t\tresolve(obj);\n\t\t});\n\t},\n\tdeleteCom: function deleteCom(_ref7, obj) {\n\t\tvar commit = _ref7.commit,\n\t\t    getters = _ref7.getters;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar currentCom = getters.getCurrentCom;\n\t\t\tif (obj && obj.cons) {\n\t\t\t\tcurrentCom = obj.cons;\n\t\t\t}\n\t\t\tvar parentObj = void 0;\n\t\t\tif (currentCom.$$level === 2) {\n\t\t\t\tparentObj = getters.getPageData;\n\t\t\t} else {\n\t\t\t\tparentObj = _getParentCom(getters.getPageData, getters.getCurrentComKey).content;\n\t\t\t}\n\t\t\tcommit('DEL_COM', { parent: parentObj, key: currentCom });\n\t\t\tresolve(currentCom);\n\t\t});\n\t},\n\tsort: function sort(_ref8, obj) {\n\t\tvar commit = _ref8.commit,\n\t\t    getters = _ref8.getters;\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tvar com = obj.dragEle;\n\t\t\tvar parentObj = void 0;\n\t\t\tif (com.$$level === 2) {\n\t\t\t\tparentObj = getters.getPageData;\n\t\t\t} else {\n\t\t\t\tparentObj = _getParentCom(getters.getPageData, com.$$key).content;\n\t\t\t}\n\t\t\tobj.parent = parentObj;\n\t\t\tcommit('SORT_COM', obj);\n\t\t\tresolve(true);\n\t\t});\n\t},\n\tsetClientWidth: function setClientWidth(_ref9, obj) {\n\t\tvar commit = _ref9.commit;\n\n\t\tcommit('SET_CLIENT_WIDTH', obj);\n\t}\n};\n/* harmony default export */ __webpack_exports__[\"default\"] = (new __WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* default */].Store({\n\tstate: state,\n\tmutations: mutations,\n\tactions: actions,\n\tgetters: getters\n}));\n\n/***/ })\n\n},[755]);\n\n\n// WEBPACK FOOTER //\n// static/js/module/editorre/store.06694f7977d8773bc5fa.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nconst Token = require('uuid-token-generator');\nlet token = new Token(Token.BASE16);\n\nVue.use(Vuex);\n\nconst _getParentCom = (coms, key) => {\n\tif(!coms || coms.length < 1){\n\t\treturn false;\n\t}\n\n\tlet _isContain = (children, key) => {\n\t\tlet eqr = children.some((com) => {\n\t\t\tif(com.$$key === key){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\treturn eqr;\n\t};\n\n\tvar stack = [];\n\tvar com;\n\tcoms.forEach((com, i) => {\n\t\tstack.push(com);\n\t});\n\tvar tmp;\n\twhile(stack.length){\n\t\ttmp = stack.shift();\n\t \tvar children = tmp.content;\n\t\tif(children && children.length > 0 && _isContain(children, key)){\n\t\t\tcom = tmp;\n\t\t\tbreak;\n\t\t}\n        if(children && children.length > 0){\n            stack = stack.concat(children);\n        }\n\t}\n\treturn com;\n};\nconst _getCom = (coms, key) => {\n\tif(!coms || coms.length < 1){\n\t\treturn false;\n\t}\n\tvar stack = [];\n\tvar com;\n\tcoms.forEach((com, i) => {\n\t\tstack.push(com);\n\t});\n\tvar tmp;\n\twhile(stack.length){\n\t\ttmp = stack.shift();\n\t\tif(tmp.$$key === key){\n\t\t\tcom = tmp;\n\t\t\tbreak;\n\t\t}\n\t \tvar children = tmp.content;\n        if(children && children.length > 0){\n            stack = stack.concat(children);\n        }\n\t}\n\treturn com;\n};\nconst state = {\n\tbase:{\n\t\tid: '',\n\t\tt_type: '',\n\t\ttitle: '',\n\t\tdesc: '',\n\t\timg_cover: '',\n\t\tplatform_type: 0,\n\t\tpage_type: 0,\n\t\tupdate_time: ''\n\t},\n\tjson:[],\n\tcurrentComKey: '',\n\tclientWidth: 375\n};\nconst getters = {\n\tgetBaseData (state) {\n\t\treturn state.base;\n\t},\n\tgetComType (state) {\n\t\treturn state.base.t_type;\n\t},\n\tgetPageData (state) {\n\t\treturn state.json;\n\t},\n\tgetCurrentComKey (state) {\n\t\treturn state.currentComKey;\n\t},\n\tgetCurrentCom (state, getters) {\n\t\tlet pageData = getters.getPageData;\n\t\tlet currKey = getters.getCurrentComKey;\n\t\tlet currCom;\n\t\tcurrCom = _getCom(pageData, currKey);\n\t\treturn currCom;\n\t},\n\tclientWidth (state) {\n\t\treturn state.clientWidth;\n\t}\n};\nconst mutations ={\n\tADD_ROOT (state, obj) {\n\t\tlet index = state.json.length;\n\t\tVue.set(state.json, index, obj);\n\t\tstate.currentComKey = obj.$$key;\n\t},\n\tADD_COM (state, obj) {\n\t\tVue.set(obj.cc.content, obj.cc.content.length, obj.chc);\n\t\tstate.currentComKey = obj.chc.$$key;\n\t},\n\tUPDATE_COM (state, obj) {\n\t\tobj.currentCom = obj.data;\n\t},\n\tCHANGE_COM_KEY(state, key) {\n\t\tstate.currentComKey = key;\n\t},\n\tSET_BASE (state, obj) {\n\t\tstate.base.id = obj.id;\n\t\tstate.base.title = obj.title;\n\t\tstate.base.desc = obj.desc;\n\t\tstate.base.img_cover = obj.img_cover;\n\t\tstate.base.t_type = obj.t_type;\n\t\tstate.base.platform_type = obj.platform_type;\n\t\tstate.base.page_type = obj.page_type;\n\t},\n\tSET_PAGE (state, obj) {\n\t\tif(obj && obj.length>0){\n\t\t\tstate.json = obj;\n\t\t}\n\t},\n\tDEL_COM (state, obj) {\n\t\tlet index;\n\t\tobj.parent.some((com, i) => {\n\t\t\tif(com.$$key === obj.key.$$key){\n\t\t\t\tindex = i;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tVue.delete(obj.parent, index);\n\t\tstate.currentComKey = '';\n\t},\n\tSORT_COM (state, obj) {\n\t\tobj.parent.splice(obj.dragIndex, 1);\n\t\tobj.parent.splice(obj.dropIndex, 0, obj.dragEle);\n\t},\n\tSET_CLIENT_WIDTH (state, obj) {\n\t\tstate.clientWidth = obj;\n\t}\n};\nconst actions = {\n\taddContainer ({commit}, obj) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet unique = 'cp-'+ token.generate();\n\t\t\tobj.page.$$key = unique;\n\t\t\tobj.page.id = unique;\n\t\t\tcommit('ADD_ROOT', obj.page);\n\t\t\tresolve(obj.page);\n\t\t});\n\t},\n\taddCom ({commit, getters}, obj) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet container = obj.container || getters.getPageData[getters.getPageData.length - 1];\n\t\t\tlet currentCom = getters.getCurrentCom?getters.getCurrentCom:container;\n\t\t\tlet parentCom;\n\t\t\tif(currentCom.$$level !==0 && obj.com.$$level !== currentCom.$$level){\n\t\t\t\tparentCom = currentCom;\n\t\t\t}else{\n\t\t\t\tparentCom = _getParentCom(getters.getPageData, getters.getCurrentComKey);\n\t\t\t\twhile(parentCom.$$level === obj.com.$$level){\n\t\t\t\t\tparentCom =  _getParentCom(getters.getPageData, parentCom.$$key);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet unique = 'cp-'+ token.generate();\n\t\t\tobj.com.$$key = unique;\n\t\t\tobj.com.id = unique;\n\t\t\tcommit('ADD_COM', {cc:parentCom, chc:obj.com});\n\t\t\tresolve({com: obj.com, curCon: parentCom});\n\t\t});\n\t},\n\tupdateCom ({commit}, obj) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tcommit('UPDATE_COM', obj);\n\t\t\tresolve(obj.currentCom);\n\t\t})\n\t},\n\tchangeComKey ({commit}, obj) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tcommit('CHANGE_COM_KEY', obj);\n\t\t\tresolve(obj);\n\t\t});\n\t},\n\tsetBase ({commit}, obj) {\n\t\tcommit('SET_BASE', obj);\n\t},\n\tsetPageContent ({commit}, obj) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tcommit('SET_BASE', obj.base);\n\t\t\tcommit('SET_PAGE', obj.page);\n\n\t\t\tresolve(obj);\n\t\t});\n\t},\n\tdeleteCom ({commit, getters}, obj) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet currentCom = getters.getCurrentCom;\n\t\t\tif(obj && obj.cons){\n\t\t\t\tcurrentCom = obj.cons;\n\t\t\t}\n\t\t\tlet parentObj;\n\t\t\tif(currentCom.$$level === 2){\n\t\t\t\tparentObj = getters.getPageData;\n\t\t\t}else{\n\t\t\t\tparentObj = _getParentCom(getters.getPageData, getters.getCurrentComKey).content;\n\t\t\t}\n\t\t\tcommit('DEL_COM', {parent: parentObj, key: currentCom});\n\t\t\tresolve(currentCom);\n\t\t});\n\t},\n\tsort ({commit, getters}, obj) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet com = obj.dragEle;\n\t\t\tlet parentObj;\n\t\t\tif(com.$$level === 2){\n\t\t\t\tparentObj = getters.getPageData;\n\t\t\t}else{\n\t\t\t\tparentObj = _getParentCom(getters.getPageData, com.$$key).content;\n\t\t\t}\n\t\t\tobj.parent = parentObj;\n\t\t\tcommit('SORT_COM', obj)\n\t\t\tresolve(true);\n\t\t});\n\t},\n\tsetClientWidth ({commit}, obj) {\n\t\tcommit('SET_CLIENT_WIDTH', obj)\n\t}\n}\nexport default new Vuex.Store({\n\tstate,\n\tmutations,\n\tactions,\n\tgetters\n})\n\n\n// WEBPACK FOOTER //\n// ./src/module/editorre/store/store.js"],"sourceRoot":""}